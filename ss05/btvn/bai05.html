<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let booksId = [];
      let booksName = [];
      let inventoryQuantity = [];
      let booksCategory = [];

      function isDuplicateId(id) {
        return booksId.includes(id);
      }

      let n = +prompt("Có bao nhiêu loại sách cần nhập thông tin hôm nay? ");

      for (let i = 0; i < n; i++) {
        let id;
        do {
          id = prompt(`Nhập mã sách thứ ${i + 1}:`);
        } while (!id || id.trim() === "" || isDuplicateId(id));

        let name;
        do {
          name = prompt(`Nhập tên sách thứ ${i + 1}:`);
        } while (!name || name.trim() === "");

        let category;
        do {
          category = prompt(
            `Nhập các thể loại của sách thứ ${i + 1} (cách nhau bởi dấu phẩy):`,
          );
        } while (!category || category.trim() === "");

        let quantity;
        do {
          quantity = +prompt(`Nhập số lượng tồn kho của sách thứ ${i + 1}:`);
        } while (isNaN(quantity) || quantity < 0);

        booksId.push(id);
        booksName.push(name);
        booksCategory.push(category);
        inventoryQuantity.push(quantity);
      }

      let countProgramming = 0;
      for (let cat of booksCategory) {
        if (cat.toLowerCase().includes("lập trình")) {
          countProgramming++;
        }
      }
      console.log("Tổng số sách thuộc thể loại 'Lập trình':", countProgramming);

      console.log(
        "Danh sách mã sách thuộc cả hai thể loại 'JavaScript' và 'Web':",
      );
      for (let i = 0; i < booksCategory.length; i++) {
        let catLower = booksCategory[i].toLowerCase();
        if (catLower.includes("javascript") && catLower.includes("web")) {
          console.log(booksId[i]);
        }
      }

      let minIndex = 0;
      for (let i = 1; i < inventoryQuantity.length; i++) {
        if (inventoryQuantity[i] < inventoryQuantity[minIndex]) {
          minIndex = i;
        }
      }
      console.log("Loại sách có số lượng tồn kho thấp nhất:");
      console.log(
        `Mã sách: ${booksId[minIndex]}, Tên sách: ${booksName[minIndex]}, Tồn kho: ${inventoryQuantity[minIndex]}`,
      );
    </script>
  </body>
</html>
