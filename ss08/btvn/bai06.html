<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const players = [
        "Messi - Forward - 25 - 15 - 34",
        "Ronaldo - Forward - 30 - 10 - 38",
        "Neymar - Forward - 18 - 20 - 32",
        "De Bruyne - Midfielder - 8 - 25 - 35",
        "Kante - Midfielder - 2 - 5 - 36",
        "Van Dijk - Defender - 5 - 3 - 33",
        "Alisson - Goalkeeper - 0 - 1 - 37",
      ];

      const reportByPosition = (arr) => {
        const grouped = arr
          .map((p) => {
            const [name, position, goals, assists, matches] = p.split(" - ");
            return {
              name,
              position,
              goals: +goals,
              assists: +assists,
              matches: +matches,
            };
          })
          .reduce((acc, player) => {
            acc[player.position] = acc[player.position] || [];
            acc[player.position].push(player);
            return acc;
          }, {});

        console.log("BÁO CÁO HIỆU SUẤT THEO VỊ TRÍ\n");

        let totalTeamGoals = 0;
        const positionsOrder = [
          "Forward",
          "Midfielder",
          "Defender",
          "Goalkeeper",
        ];

        positionsOrder.forEach((pos) => {
          const group = grouped[pos];
          if (!group) return;

          const totalGoals = group.reduce((sum, p) => sum + p.goals, 0);
          const totalAssists = group.reduce((sum, p) => sum + p.assists, 0);
          const totalMatches = group.reduce((sum, p) => sum + p.matches, 0);
          const avgPerformance =
            totalMatches === 0
              ? 0
              : ((totalGoals + totalAssists) / totalMatches).toFixed(2);

          totalTeamGoals += totalGoals;

          console.log(`${pos}:`);
          console.log(`- Số cầu thủ: ${group.length}`);
          console.log(`- Tổng bàn thắng: ${totalGoals}`);
          console.log(`- Tổng kiến tạo: ${totalAssists}`);
          console.log(`- Tổng số trận: ${totalMatches}`);
          console.log(`- Trung bình hiệu suất/trận: ${avgPerformance}\n`);
        });

        console.log("------------------------");
        console.log(`Tổng bàn thắng toàn đội : ${totalTeamGoals}`);
      };

      reportByPosition(players);
    </script>
  </body>
</html>
